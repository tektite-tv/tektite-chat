<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tektite's Chat</title>

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: "Courier New", monospace;
}

.topbar {
  background: #2b0040;
  padding: 12px;
  color: lime;
  font-weight: bold;
}

.chat-container {
  padding: 20px;
  height: 60vh;
  overflow-y: auto;
}

.message {
  margin-bottom: 10px;
}

.user {
  color: cyan;
}

.bot {
  color: red;
}

.input-area {
  position: fixed;
  bottom: 0;
  width: 100%;
  padding: 10px;
  background: black;
}

textarea {
  width: 80%;
  height: 80px;
  background: black;
  color: lime;
  border: 2px solid lime;
  font-family: inherit;
  padding: 10px;
}

button {
  padding: 10px;
  margin-left: 10px;
  background: lime;
  border: none;
  color: black;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="topbar">
  Tektite's Chat
</div>

<div id="chat" class="chat-container"></div>

<div class="input-area">
  <textarea id="input" placeholder="Ask anything or say something stupid..."></textarea>
  <button id="send">Send</button>
</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");
const sendBtn = document.getElementById("send");

function addMessage(role, text) {
  const div = document.createElement("div");
  div.className = "message " + role;
  div.textContent = (role === "user" ? "User: " : "Bot: ") + text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function sendMessage() {
  const text = input.value.trim();
  if (!text) return;

  addMessage("user", text);
  input.value = "";

  try {
    const res = await fetch("https://tektite-chat.onrender.com/chat", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        messages: [{ role: "user", content: text }]
      })
    });

    const data = await res.json();
    addMessage("bot", data.content);

  } catch (err) {
    console.error(err);
    addMessage("bot", "Error talking to server.");
  }
}

sendBtn.onclick = sendMessage;

input.addEventListener("keydown", (e) => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});
</script>

</body>
</html>